![[Pasted image 20230815122806.png]]


# Варианты

![[Pasted image 20230815122900.png]]
*(Красные - антипаттерны)*



# Вызов 
### Преимущества
- Прост в реализации (синхронный вызов)
- Предсказуемое время обработки

### Недостатки
- Сервис не может принимать запросы, будучи заняты


# Сообщене
##  Преимущества
- Сервер может принимать запросы будучи занятым
- Сглаживаются всплески активности
- Выше пропуская способность
  (загрузка новой задачи на обработку не по сигналу из вне, а по готовности сервера)
  
## Недостатки
 - Требуется временное хранение сообщений (очередь)


# Типы сообщений
## Запросы (Request)
- Запросы (Query) - чтение данных
- Команды (Command) - изменение данных
## Ответы (Response)
- События (Event)
- Данные (Data)



# Очередь сообщений

Очередь может распологаться
### На клиенте (антипаттерн)
- Сложно организовать доступ сервера к клиенту, сложно решить задачу для множества клиентов

### На сервере
- Производительность, большая надежность отслеживаемость

### На отдельном узле (брокер сообщений)
- Может принимать запросы будучи отключенным
- Клиент не знает о сервере

# Синхронное взаимодействие
### Преимущества
- Прост в реализации  (подходит в большенстве ситуаций)
- Широко распространен

### Недостатки
- В процессе ожидания простаивают занятые ресурсы (потоки)
- Всплеск на одном компоненте может затронуть все остальные
- Сложно организовать синхронное сообщение