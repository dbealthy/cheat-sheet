CORS (Cross-Origin Resource Sharing) — это механизм безопасности в веб-приложениях, который позволяет или запрещает доступ к ресурсам веб-сервера из другого домена. Он решает проблему ограничения **междоменных запросов** (Cross-Origin Requests), возникающую из-за политики одного источника (**Same-Origin Policy**).

### Основные понятия:

1. **Политика одного источника (Same-Origin Policy)**:
    
    - Браузеры по умолчанию запрещают выполнение запросов из одного источника (например, `http://example.com`) к ресурсу на другом источнике (например, `http://api.example.com`), если эти источники различаются по:
        - Протоколу (http, https),
        - Доменной части,
        - Порту.
2. **CORS**:
    
    - CORS позволяет серверу указывать, каким источникам разрешён доступ к его ресурсам, и при каких условиях.
    - Настройки CORS применяются к запросам, отправленным с помощью **JavaScript** через методы, такие как `fetch` или `XMLHttpRequest`.

---

### Как работает CORS?

Когда браузер выполняет междоменные запросы, он добавляет заголовки, которые сервер анализирует, чтобы решить, разрешить или отклонить запрос. Основные этапы:

1. **Предварительный запрос (Preflight Request)**:
    
    - Для "опасных" запросов браузер отправляет предварительный запрос (метод `OPTIONS`) на сервер, чтобы узнать, разрешён ли доступ.
    - Сервер отвечает заголовками, указывающими, какие запросы допустимы.
2. **Основной запрос**:
    
    - Если сервер разрешил доступ, браузер выполняет фактический запрос.

---

### Основные заголовки CORS:

1. **Заголовки в ответе сервера (response)**:
    
    - `Access-Control-Allow-Origin`: Указывает, какие источники могут получать доступ к ресурсу (например, `*`, `https://example.com`).
    - `Access-Control-Allow-Methods`: Перечисляет допустимые HTTP-методы (например, `GET`, `POST`, `OPTIONS`).
    - `Access-Control-Allow-Headers`: Указывает, какие заголовки клиент может отправить (например, `Content-Type`, `Authorization`).
    - `Access-Control-Allow-Credentials`: Разрешает отправку cookies или других учётных данных (например, `true`).
    - `Access-Control-Max-Age`: Время кэширования результатов предварительного запроса.
2. **Заголовки в запросе клиента**:
    
    - `Origin`: Указывает источник, откуда отправляется запрос.

---

### Пример:

1. **Клиентский запрос:**